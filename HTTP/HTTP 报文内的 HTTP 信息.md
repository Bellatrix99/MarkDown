# HTTP 报文内的 HTTP 信息

## HTTP 报文

用于 HTTP 协议交互的信息被称为 HTTP 报文。

HTTP 报文大致可分为报文首部和报文主体两块。

![image-20210518204725846](https://i.loli.net/2021/05/18/r5aNGYDnUAEpXMw.png)

## 报文结构

![image-20210518204834319](https://i.loli.net/2021/05/18/Oj8Rhnal3zmQWX1.png)

## 编码提升传输速率

HTTP 可以通过计算机编码来提升传输速率，但会消耗更多的 CPU 等资源。

### 报文主体和实体主体的差异

- 报文( message )

  是 HTTP 通信中的基本单位，由 8 位组字节流组成，通过 HTTP 通信传输。

- 实体( entity )

  作为请求或响应的有效载荷数据（补充项）被传输，其内容由实体首部和实体主体组成。

HTTP 报文的主体用户传输请求或响应的实体主体。

通常，报文主体等于实体主体。只有当传输中进行编码操作时，实体主体的内容发生变化，才导致它和报文主体产生差异。

### 压缩传输的内容编码

![image-20210518205714526](https://i.loli.net/2021/05/18/Wb3tKBc2yDNA7H4.png)

常见的内容编码有以下几种：

- gzip（ GNU zip ）
- compress（ UNIX 系统的标准压缩 ）
- deflate（ zlib ）
- identit有（不进行编码 ）

### 分割发送的分块传输编码

在 HTTP 通信过程中，请求的编码实体资源尚未全部传输完成之前，浏览器无法显示请求页面。在传输大容量数据时，通过把数据分割成多块，能够让浏览器逐步显示页面。

这样把实体主体分块的功能成为分块传输编码。

![image-20210518210008109](https://i.loli.net/2021/05/18/Lp8HMjC3nDK6FBP.png)

分块传输编码会将实体主体分成多个部分（块）。每一块都会用十六进制来标记块的大小，而尸体主题的最后一块会使用“0(CR+LF)”来标记。